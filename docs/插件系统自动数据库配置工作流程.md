# æ’ä»¶ç³»ç»Ÿè‡ªåŠ¨æ•°æ®åº“é…ç½®å·¥ä½œæµç¨‹

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
- [ä¾èµ–é…ç½®æ ¼å¼](#ä¾èµ–é…ç½®æ ¼å¼)
- [APIæ¥å£è§„èŒƒ](#apiæ¥å£è§„èŒƒ)
- [å‰ç«¯é›†æˆæŒ‡å—](#å‰ç«¯é›†æˆæŒ‡å—)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## ğŸ¯ æ¦‚è¿°

æ’ä»¶ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„è‡ªåŠ¨æ•°æ®åº“é…ç½®åŠŸèƒ½ï¼Œæ”¯æŒ MongoDB æ•°æ®åº“çš„è‡ªåŠ¨æ£€æµ‹ã€åˆ›å»ºå’Œé…ç½®ã€‚ç³»ç»Ÿèƒ½å¤Ÿæ ¹æ®æ’ä»¶çš„ä¾èµ–å£°æ˜ï¼Œè‡ªåŠ¨å®Œæˆæ•°æ®åº“ã€é›†åˆã€ç´¢å¼•çš„åˆ›å»ºå’Œåˆå§‹åŒ–ï¼Œå®ç°æ’ä»¶çš„**é›¶é…ç½®å®‰è£…**ä½“éªŒã€‚

### ğŸš€ æ ¸å¿ƒç‰¹æ€§

- âœ… **è‡ªåŠ¨æ£€æµ‹**ï¼šæ™ºèƒ½æ£€æµ‹ MongoDB è¿æ¥å’Œç°æœ‰èµ„æº
- âœ… **è‡ªåŠ¨åˆ›å»º**ï¼šæ ¹æ®é…ç½®è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ã€é›†åˆå’Œç´¢å¼•
- âœ… **çµæ´»é…ç½®**ï¼šæ”¯æŒæ–°å»ºæˆ–ä½¿ç”¨ç°æœ‰æ•°æ®åº“
- âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šè‡ªåŠ¨åˆ›å»ºå¿…è¦çš„æ•°æ®åº“ç´¢å¼•
- âœ… **ç”¨æˆ·å‹å¥½**ï¼šæä¾›å¯è§†åŒ–é…ç½®ç•Œé¢
- âœ… **é”™è¯¯é¢„é˜²**ï¼šå®‰è£…å‰éªŒè¯æ‰€æœ‰ä¾èµ–é¡¹

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ç•Œé¢      â”‚    â”‚   åç«¯API       â”‚    â”‚   MongoDB       â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ DependencyCheckerâ”‚â—„â”€â”€â–ºâ”‚PluginHandler   â”‚â—„â”€â”€â–ºâ”‚ Database        â”‚
â”‚                 â”‚    â”‚DependencyServiceâ”‚    â”‚ Collections     â”‚
â”‚ é…ç½®é€‰æ‹©        â”‚    â”‚                 â”‚    â”‚ Indexes         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘

```
dependencies.json â†’ ä¾èµ–æ£€æµ‹ â†’ é…ç½®é€‰æ‹© â†’ è‡ªåŠ¨åˆ›å»º â†’ éªŒè¯å®Œæˆ
```

---

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. æ’ä»¶å®‰è£…æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·é€‰æ‹©æ’ä»¶] --> B[è¯»å– dependencies.json]
    B --> C[æ£€æµ‹ MongoDB è¿æ¥]
    C --> D{è¿æ¥æˆåŠŸ?}
    D -->|å¦| E[æ˜¾ç¤ºè¿æ¥é”™è¯¯]
    D -->|æ˜¯| F[æ£€æŸ¥æ•°æ®åº“å­˜åœ¨æ€§]
    F --> G[æ£€æŸ¥é›†åˆå®Œæ•´æ€§]
    G --> H[æ£€æŸ¥ç´¢å¼•ç»“æ„]
    H --> I{éœ€è¦é…ç½®?}
    I -->|å¦| J[ç›´æ¥å®‰è£…å®Œæˆ]
    I -->|æ˜¯| K[æ˜¾ç¤ºé…ç½®ç•Œé¢]
    K --> L[ç”¨æˆ·é€‰æ‹©é…ç½®æ–¹æ¡ˆ]
    L --> M[æ‰§è¡Œè‡ªåŠ¨é…ç½®]
    M --> N[éªŒè¯é…ç½®ç»“æœ]
    N --> O[å®‰è£…å®Œæˆ]
```

### 2. ä¾èµ–æ£€æµ‹é˜¶æ®µ

#### æ£€æµ‹é¡¹ç›®æ¸…å•

- **ğŸ”Œ MongoDB è¿æ¥æ£€æµ‹**
  - éªŒè¯æ•°æ®åº“æœåŠ¡æ˜¯å¦å¯ç”¨
  - æ£€æŸ¥è¿æ¥å­—ç¬¦ä¸²æœ‰æ•ˆæ€§
  - æµ‹è¯•è¯»å†™æƒé™

- **ğŸ—ƒï¸ æ•°æ®åº“å­˜åœ¨æ€§æ£€æŸ¥**
  - æ£€æŸ¥ç›®æ ‡æ•°æ®åº“æ˜¯å¦å­˜åœ¨
  - åˆ—å‡ºå¯ç”¨çš„ç°æœ‰æ•°æ®åº“
  - è¯„ä¼°æƒé™å’Œç©ºé—´

- **ğŸ“Š é›†åˆå®Œæ•´æ€§éªŒè¯**
  - æ£€æŸ¥æ‰€éœ€é›†åˆæ˜¯å¦å­˜åœ¨
  - éªŒè¯é›†åˆç»“æ„å’Œæƒé™
  - è¯†åˆ«ç¼ºå¤±çš„é›†åˆ

- **ğŸ” ç´¢å¼•ç»“æ„æ£€æŸ¥**
  - éªŒè¯å¿…è¦ç´¢å¼•æ˜¯å¦å­˜åœ¨
  - æ£€æŸ¥ç´¢å¼•é…ç½®æ­£ç¡®æ€§
  - è¯†åˆ«æ€§èƒ½ä¼˜åŒ–æœºä¼š

### 3. è‡ªåŠ¨é…ç½®é˜¶æ®µ

#### é…ç½®é€‰é¡¹

```typescript
interface DatabaseSetupOptions {
  suggested_database_name: string      // å»ºè®®çš„æ•°æ®åº“å
  create_new_database: boolean         // åˆ›å»ºæ–°æ•°æ®åº“
  use_existing_database: boolean       // ä½¿ç”¨ç°æœ‰æ•°æ®åº“
  available_databases: string[]        // å¯ç”¨çš„ç°æœ‰æ•°æ®åº“
  config: Record<string, string>       // é¢å¤–é…ç½®å‚æ•°
}
```

#### æ‰§è¡Œæ­¥éª¤

1. **æ•°æ®åº“åˆ›å»º/é€‰æ‹©**
2. **é›†åˆåˆ›å»º**
3. **ç´¢å¼•åˆ›å»º**
4. **æƒé™é…ç½®**
5. **æ•°æ®åˆå§‹åŒ–**ï¼ˆå¦‚éœ€è¦ï¼‰

---

## ğŸ“ ä¾èµ–é…ç½®æ ¼å¼

### dependencies.json æ–‡ä»¶ç»“æ„

```json
{
  "plugin_key": "plugin-name",
  "database": {
    "type": "mongodb",
    "database_name": "plugin_database",
    "required": true,
    "collections": [
      {
        "name": "collection_name",
        "description": "é›†åˆæè¿°",
        "indexes": [
          {
            "name": "index_name",
            "fields": {
              "field_name": 1
            },
            "unique": true,
            "options": {
              "background": true
            }
          }
        ],
        "schema": {
          "_id": "ObjectId",
          "field1": "string",
          "field2": "number",
          "created_at": "date"
        }
      }
    ]
  },
  "services": [
    {
      "name": "mongodb",
      "type": "database",
      "host": "localhost",
      "port": 27017,
      "required": true,
      "description": "MongoDBæ•°æ®åº“æœåŠ¡"
    }
  ],
  "environment": [
    {
      "name": "MONGODB_URI",
      "required": true,
      "type": "url",
      "description": "MongoDBè¿æ¥å­—ç¬¦ä¸²",
      "default": "mongodb://localhost:27017"
    }
  ]
}
```

### é…ç½®å­—æ®µè¯´æ˜

#### Database é…ç½®
- `type`: æ•°æ®åº“ç±»å‹ï¼ˆç›®å‰æ”¯æŒ mongodbï¼‰
- `database_name`: æ•°æ®åº“åç§°
- `required`: æ˜¯å¦å¿…éœ€
- `collections`: é›†åˆé…ç½®æ•°ç»„

#### Collection é…ç½®
- `name`: é›†åˆåç§°
- `description`: é›†åˆæè¿°
- `indexes`: ç´¢å¼•é…ç½®æ•°ç»„
- `schema`: æ•°æ®ç»“æ„å®šä¹‰

#### Index é…ç½®
- `name`: ç´¢å¼•åç§°
- `fields`: ç´¢å¼•å­—æ®µå’Œæ’åºæ–¹å‘
- `unique`: æ˜¯å¦å”¯ä¸€ç´¢å¼•
- `options`: é¢å¤–ç´¢å¼•é€‰é¡¹

---

## ğŸ”Œ APIæ¥å£è§„èŒƒ

### æ£€æŸ¥æ’ä»¶ä¾èµ–

```http
GET /api/plugins/{pluginKey}/dependencies/check
```

**å“åº”æ ¼å¼ï¼š**
```json
{
  "success": true,
  "data": {
    "plugin_key": "plugin-name",
    "overall_status": "warning",
    "can_install": true,
    "requires_setup": true,
    "database": {
      "status": "setup_required",
      "message": "æ•°æ®åº“ä¸å­˜åœ¨ï¼Œéœ€è¦åˆ›å»º",
      "setup_options": {
        "suggested_database_name": "plugin_database",
        "available_databases": ["existing_db1"],
        "create_new_database": true,
        "use_existing_database": true
      }
    },
    "suggestions": [
      "éœ€è¦è®¾ç½®æ•°æ®åº“è¿æ¥å’Œåˆ›å»ºå¿…è¦çš„é›†åˆ"
    ]
  }
}
```

### é…ç½®æ’ä»¶æ•°æ®åº“

```http
POST /api/plugins/{pluginKey}/dependencies/setup
Content-Type: application/json

{
  "suggested_database_name": "plugin_database",
  "create_new_database": true,
  "use_existing_database": false
}
```

**å“åº”æ ¼å¼ï¼š**
```json
{
  "success": true,
  "message": "æ•°æ®åº“è®¾ç½®æˆåŠŸ"
}
```

---

## ğŸ¨ å‰ç«¯é›†æˆæŒ‡å—

### DependencyChecker ç»„ä»¶ä½¿ç”¨

```vue
<template>
  <DependencyChecker
    v-model="showChecker"
    :plugin-key="selectedPlugin.key"
    @install-confirmed="handleInstallConfirmed"
  />
</template>

<script setup>
import DependencyChecker from '@/components/DependencyChecker.vue'

const showChecker = ref(false)
const selectedPlugin = ref(null)

// æ˜¾ç¤ºä¾èµ–æ£€æŸ¥å™¨
const checkDependencies = (plugin) => {
  selectedPlugin.value = plugin
  showChecker.value = true
}

// ä¾èµ–æ£€æŸ¥é€šè¿‡ï¼Œç»§ç»­å®‰è£…
const handleInstallConfirmed = () => {
  // æ‰§è¡Œæ’ä»¶å®‰è£…é€»è¾‘
  installPlugin(selectedPlugin.value)
}
</script>
```

### çŠ¶æ€æ˜¾ç¤ºç»„ä»¶

```vue
<template>
  <div class="dependency-status">
    <el-tag 
      :type="getStatusType(status)" 
      size="large"
      effect="dark"
    >
      {{ getStatusText(status) }}
    </el-tag>
  </div>
</template>

<script setup>
const getStatusType = (status) => {
  switch (status) {
    case 'success':
    case 'available':
      return 'success'
    case 'warning':
    case 'setup_required':
      return 'warning'
    case 'error':
    case 'missing':
      return 'danger'
    default:
      return 'info'
  }
}
</script>
```

---

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### å¤–é“¾æ’ä»¶é…ç½®ç¤ºä¾‹

ä»¥ `plugin-wailki` å¤–é“¾æ’ä»¶ä¸ºä¾‹ï¼š

#### 1. ä¾èµ–é…ç½®æ–‡ä»¶

```json
{
  "plugin_key": "wailki",
  "database": {
    "type": "mongodb",
    "database_name": "plugin_external_links",
    "required": true,
    "collections": [
      {
        "name": "external_links",
        "description": "å¤–é“¾æ•°æ®è¡¨",
        "indexes": [
          {
            "name": "url_index",
            "fields": {"url": 1},
            "unique": true
          },
          {
            "name": "created_at_index",
            "fields": {"created_at": -1}
          }
        ]
      }
    ]
  }
}
```

#### 2. è‡ªåŠ¨åˆ›å»ºç»“æœ

ç³»ç»Ÿå°†è‡ªåŠ¨åˆ›å»ºï¼š
- æ•°æ®åº“ï¼š`plugin_external_links`
- é›†åˆï¼š`external_links`ã€`link_stats`
- ç´¢å¼•ï¼š`url_index`ï¼ˆå”¯ä¸€ï¼‰ã€`created_at_index`ã€å…¶ä»–æ€§èƒ½ç´¢å¼•

#### 3. ç”¨æˆ·ç•Œé¢æµç¨‹

1. ç”¨æˆ·ç‚¹å‡»"å®‰è£…æ’ä»¶"
2. ç³»ç»Ÿæ£€æµ‹åˆ°éœ€è¦ MongoDB é…ç½®
3. æ˜¾ç¤ºé…ç½®é€‰æ‹©ç•Œé¢ï¼š
   - âœ… åˆ›å»ºæ–°æ•°æ®åº“ `plugin_external_links`
   - âš ï¸ ä½¿ç”¨ç°æœ‰æ•°æ®åº“ï¼ˆé€‰æ‹©åˆ—è¡¨ï¼‰
4. ç”¨æˆ·ç¡®è®¤é…ç½®
5. ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“å’Œé›†åˆ
6. å®‰è£…å®Œæˆ

---

## ğŸ’¡ æœ€ä½³å®è·µ

### æ’ä»¶å¼€å‘å»ºè®®

#### 1. å‘½åè§„èŒƒ
```json
{
  "database_name": "plugin_{plugin_key}",    // æ•°æ®åº“å‘½å
  "collection_name": "{plugin_key}_{feature}", // é›†åˆå‘½å
  "index_name": "{field}_index"               // ç´¢å¼•å‘½å
}
```

#### 2. ç´¢å¼•è®¾è®¡
```json
{
  "indexes": [
    {
      "name": "primary_query_index",
      "fields": {"status": 1, "created_at": -1},
      "description": "ä¸»è¦æŸ¥è¯¢ç´¢å¼•"
    },
    {
      "name": "unique_constraint_index", 
      "fields": {"unique_field": 1},
      "unique": true,
      "description": "å”¯ä¸€æ€§çº¦æŸ"
    }
  ]
}
```

#### 3. æ€§èƒ½ä¼˜åŒ–
- ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µåˆ›å»ºç´¢å¼•
- ä½¿ç”¨å¤åˆç´¢å¼•ä¼˜åŒ–å¤šå­—æ®µæŸ¥è¯¢
- é¿å…è¿‡å¤šä¸å¿…è¦çš„ç´¢å¼•

#### 4. æ•°æ®ç»“æ„è®¾è®¡
```json
{
  "schema": {
    "_id": "ObjectId",
    "plugin_data": "object",
    "status": "string",
    "created_at": "date",
    "updated_at": "date",
    "version": "string"
  }
}
```

### è¿ç»´å»ºè®®

#### 1. ç›‘æ§æŒ‡æ ‡
- æ•°æ®åº“è¿æ¥çŠ¶æ€
- é›†åˆå¤§å°å’Œæ–‡æ¡£æ•°é‡
- ç´¢å¼•ä½¿ç”¨æ•ˆç‡
- æŸ¥è¯¢æ€§èƒ½

#### 2. å¤‡ä»½ç­–ç•¥
- å®šæœŸå¤‡ä»½æ’ä»¶æ•°æ®åº“
- ä¿ç•™é…ç½®æ–‡ä»¶å¤‡ä»½
- æµ‹è¯•æ¢å¤æµç¨‹

#### 3. æƒé™ç®¡ç†
- ä½¿ç”¨æœ€å°æƒé™åŸåˆ™
- ä¸ºæ¯ä¸ªæ’ä»¶åˆ›å»ºä¸“ç”¨ç”¨æˆ·
- å®šæœŸå®¡æŸ¥æƒé™é…ç½®

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### 1. MongoDB è¿æ¥å¤±è´¥

**é—®é¢˜ç—‡çŠ¶ï¼š**
- æ˜¾ç¤º"æ— æ³•è¿æ¥åˆ°MongoDBæœåŠ¡å™¨"
- æ’ä»¶å®‰è£…å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ MongoDB æœåŠ¡çŠ¶æ€
systemctl status mongod

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep 27017

# éªŒè¯è¿æ¥å­—ç¬¦ä¸²
mongo "mongodb://localhost:27017"
```

#### 2. æƒé™ä¸è¶³

**é—®é¢˜ç—‡çŠ¶ï¼š**
- æ˜¾ç¤º"æƒé™ä¸è¶³"é”™è¯¯
- æ— æ³•åˆ›å»ºæ•°æ®åº“æˆ–é›†åˆ

**è§£å†³æ–¹æ¡ˆï¼š**
```javascript
// ä¸ºæ’ä»¶åˆ›å»ºä¸“ç”¨ç”¨æˆ·
use admin
db.createUser({
  user: "plugin_user",
  pwd: "secure_password",
  roles: [
    { role: "readWrite", db: "plugin_external_links" },
    { role: "dbAdmin", db: "plugin_external_links" }
  ]
})
```

#### 3. é›†åˆåˆ›å»ºå¤±è´¥

**é—®é¢˜ç—‡çŠ¶ï¼š**
- æ•°æ®åº“å­˜åœ¨ä½†é›†åˆåˆ›å»ºå¤±è´¥
- ç´¢å¼•åˆ›å»ºé”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
```javascript
// æ‰‹åŠ¨åˆ›å»ºé›†åˆ
use plugin_external_links
db.createCollection("external_links")

// æ‰‹åŠ¨åˆ›å»ºç´¢å¼•
db.external_links.createIndex(
  { "url": 1 }, 
  { "unique": true, "name": "url_index" }
)
```

#### 4. ä¾èµ–é…ç½®é”™è¯¯

**é—®é¢˜ç—‡çŠ¶ï¼š**
- ä¾èµ–æ£€æŸ¥å¤±è´¥
- é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
```json
// éªŒè¯ dependencies.json æ ¼å¼
{
  "plugin_key": "valid_plugin_name",
  "database": {
    "type": "mongodb",           // å¿…éœ€å­—æ®µ
    "database_name": "db_name",  // å¿…éœ€å­—æ®µ
    "required": true             // å¿…éœ€å­—æ®µ
  }
}
```

### è°ƒè¯•å·¥å…·

#### 1. æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹ MongoDB æ—¥å¿—
tail -f /var/log/mongodb/mongod.log

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/plugin-system.log
```

#### 2. æ‰‹åŠ¨æµ‹è¯•
```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
curl -X GET http://localhost:8080/api/plugins/test-plugin/dependencies/check

# æµ‹è¯•æ•°æ®åº“åˆ›å»º
curl -X POST http://localhost:8080/api/plugins/test-plugin/dependencies/setup \
  -H "Content-Type: application/json" \
  -d '{"create_new_database": true, "suggested_database_name": "test_db"}'
```

#### 3. æ•°æ®åº“çŠ¶æ€æ£€æŸ¥
```javascript
// MongoDB Shell å‘½ä»¤
show dbs                    // æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“
use plugin_database        // åˆ‡æ¢æ•°æ®åº“
show collections           // æ˜¾ç¤ºé›†åˆ
db.collection.getIndexes() // æ˜¾ç¤ºç´¢å¼•
```

---

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### å…³é”®æŒ‡æ ‡

- **å“åº”æ—¶é—´**ï¼šä¾èµ–æ£€æŸ¥å’Œé…ç½®æ—¶é—´
- **æˆåŠŸç‡**ï¼šæ’ä»¶å®‰è£…æˆåŠŸç‡
- **èµ„æºä½¿ç”¨**ï¼šæ•°æ®åº“ç©ºé—´å’Œè¿æ¥æ•°
- **é”™è¯¯ç‡**ï¼šé…ç½®å¤±è´¥å’Œé”™è¯¯é¢‘ç‡

### ç›‘æ§è„šæœ¬ç¤ºä¾‹

```bash
#!/bin/bash
# æ’ä»¶ç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬

echo "=== æ’ä»¶ç³»ç»Ÿå¥åº·æ£€æŸ¥ ==="

# æ£€æŸ¥ MongoDB è¿æ¥
mongo --eval "db.adminCommand('ping')" > /dev/null 2>&1
if [ $? -eq 0 ]; then
    echo "âœ… MongoDB è¿æ¥æ­£å¸¸"
else
    echo "âŒ MongoDB è¿æ¥å¤±è´¥"
fi

# æ£€æŸ¥æ’ä»¶æ•°æ®åº“
plugin_dbs=$(mongo --quiet --eval "db.adminCommand('listDatabases').databases.filter(db => db.name.startsWith('plugin_')).length")
echo "ğŸ“Š æ’ä»¶æ•°æ®åº“æ•°é‡: $plugin_dbs"

# æ£€æŸ¥ API æœåŠ¡
api_status=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8080/health)
if [ "$api_status" = "200" ]; then
    echo "âœ… API æœåŠ¡æ­£å¸¸"
else
    echo "âŒ API æœåŠ¡å¼‚å¸¸: $api_status"
fi

echo "=== æ£€æŸ¥å®Œæˆ ==="
```

---

## ğŸ”® æœªæ¥æ‰©å±•

### è®¡åˆ’åŠŸèƒ½

- **ğŸ”„ è‡ªåŠ¨è¿ç§»**ï¼šæ”¯æŒæ•°æ®åº“ç»“æ„ç‰ˆæœ¬å‡çº§
- **ğŸ“Š æ€§èƒ½åˆ†æ**ï¼šå†…ç½®æ•°æ®åº“æ€§èƒ½ç›‘æ§
- **ğŸ”’ å®‰å…¨å¢å¼º**ï¼šæ•°æ®åŠ å¯†å’Œè®¿é—®æ§åˆ¶
- **ğŸŒ å¤šæ•°æ®åº“æ”¯æŒ**ï¼šæ”¯æŒ MySQLã€PostgreSQL
- **â˜ï¸ äº‘æœåŠ¡é›†æˆ**ï¼šæ”¯æŒäº‘æ•°æ®åº“æœåŠ¡

### æ‰©å±•æ¥å£

ä¸ºæœªæ¥åŠŸèƒ½é¢„ç•™çš„æ‰©å±•ç‚¹ï¼š

```typescript
interface PluginDatabaseProvider {
  check(config: DatabaseConfig): Promise<CheckResult>
  create(config: DatabaseConfig): Promise<CreateResult>
  migrate(from: string, to: string): Promise<MigrateResult>
  monitor(): Promise<MonitorResult>
}
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2025-06-20  
**ç»´æŠ¤å›¢é˜Ÿ**: æ’ä»¶ç³»ç»Ÿå¼€å‘å›¢é˜Ÿ 